{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="filters">
    <div class="filter-group">
        <h3>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
        <div class="category-buttons">
            <a href="{% url 'main' %}" class="category-btn {% if not selected_category %}active{% endif %}">
                –í—Å–µ –∫–Ω–∏–≥–∏
            </a>
            {% for category_key, category_name in categories %}
            <a href="{% url 'main' %}?category={{ category_key }}" 
               class="category-btn {% if selected_category == category_key %}active{% endif %}">
                {{ category_name }}
            </a>
            {% endfor %}
        </div>
    </div>
</div>

<div class="category-section">
    <h2 class="category-title">
        {% if selected_category %}
            üìö {{ selected_category }}
        {% elif search_query %}
            üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞: "{{ search_query }}"
        {% else %}
            üìö –í—Å–µ –∫–Ω–∏–≥–∏
        {% endif %}
        <span class="book-count">({{ books|length }})</span>
    </h2>
    
    <div class="products-grid">
        {% for book in books %}
        <div class="product-card">
            {% if book.photo %}
                <img src="{{ book.photo.url }}" alt="{{ book.title }}" class="product-image">
            {% else %}
                <div class="product-image">üìñ</div>
            {% endif %}
            <h3><a href="{% url 'main2' book.id %}">{{ book.title }}</a></h3>
            <p class="author">{{ book.author.first_name }} {{ book.author.surname }}</p>
            <p class="price">{{ book.price }} ‚ÇΩ</p>
            <button class="cart-btn" onclick="location.href='{% url 'cart' %}'">–í –∫–æ—Ä–∑–∏–Ω—É</button>
        </div>
        {% empty %}
        <div class="no-books">
            <p>{% if search_query %}–ü–æ –∑–∞–ø—Ä–æ—Å—É "{{ search_query }}" –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ{% else %}–ö–Ω–∏–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã{% endif %}</p>
            {% if search_query %}
            <a href="{% url 'main' %}" class="browse-btn">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–Ω–∏–≥–∏</a>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>

<div class="pagination">
    <a href="#" class="page-link active">1</a>
    <a href="" class="page-link">2</a>
    <a href="" class="page-link">3</a>
    <a href="" class="page-link">4</a>
    <a href="" class="page-link">5</a>
    <a href="" class="page-link next">‚Üí</a>
</div>
{% endblock %}